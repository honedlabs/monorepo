(function(s,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("vue"),require("@inertiajs/vue3")):typeof define=="function"&&define.amd?define(["exports","vue","@inertiajs/vue3"],c):(s=typeof globalThis<"u"?globalThis:s||self,c(s[":package_name"]={},s.Vue,s.Inertia))})(this,function(s,c,h){"use strict";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const R=()=>{};function I(d,f){function o(...r){return new Promise((m,a)=>{Promise.resolve(d(()=>f.apply(this,r),{fn:f,thisArg:this,args:r})).then(m).catch(a)})}return o}function O(d,f={}){let o,r,m=R;const a=u=>{clearTimeout(u),m(),m=R};let y;return u=>{const S=c.toValue(d),l=c.toValue(f.maxWait);return o&&a(o),S<=0||l!==void 0&&l<=0?(r&&(a(r),r=null),Promise.resolve(u())):new Promise((p,w)=>{m=f.rejectOnCancel?w:p,y=u,l&&!r&&(r=setTimeout(()=>{o&&a(o),r=null,p(y())},l)),o=setTimeout(()=>{r&&a(r),r=null,p(u())},S)})}}function j(d,f=200,o={}){return I(O(f,o),d)}function U(d,f,o={}){const r=c.computed(()=>d[f]),m=c.computed(()=>r.value.filters.map(e=>({...e,apply:(n,t={})=>V(e,n,t),clear:(n={})=>q(e,n),bind:()=>D(e.name)}))),a=c.computed(()=>r.value.sorts.map(e=>({...e,apply:(n={})=>W(e,e.direction,n),clear:(n={})=>C(n),bind:()=>G(e)})));function y(e){return Array.isArray(e)?e.join(r.value.config.delimiter):e}function F(e){return typeof e!="string"?e:e.trim().replace(/\s+/g,"+")}function u(e){if(!["",null,void 0,[]].includes(e))return e}function S(e,n){return n=Array.isArray(n)?n:[n],n.includes(e)?n.filter(t=>t!==e):[...n,e]}function l(e,n=null){return r.value.sorts.find(t=>t.name===e&&t.direction===n)}function p(e){return r.value.filters.find(n=>n.name===e)}function w(e){var n;return(n=r.value.searches)==null?void 0:n.find(t=>t.name===e)}function x(){return r.value.sorts.find(({active:e})=>e)}function A(){return r.value.filters.filter(({active:e})=>e)}function P(){var e;return((e=r.value.searches)==null?void 0:e.filter(({active:n})=>n))??[]}function _(e){var n;return e?((n=x())==null?void 0:n.name)===e:!!x()}function E(e){return e?A().some(n=>n.name===e):!!A().length}function M(e){var n,t;return e?(n=P())==null?void 0:n.some(i=>i.name===e):!!((t=P())!=null&&t.length)}function V(e,n,t={}){const i=typeof e=="string"?p(e):e;if(!i){console.warn(`Filter [${e}] does not exist.`);return}"multiple"in i&&i.multiple&&(n=S(n,i.value)),n=[y,F,u].reduce((g,b)=>b(g),n),console.log(n),h.router.reload({...o,...t,data:{[i.name]:n}})}function W(e,n=null,t={}){const i=typeof e=="string"?l(e,n):e;if(!i){console.warn(`Sort [${e}] does not exist.`);return}h.router.reload({...o,...t,data:{[r.value.config.sorts]:u(i.next)}})}function $(e,n={}){e=[F,u].reduce((t,i)=>i(t),e),h.router.reload({...o,...n,data:{[r.value.config.searches]:e}})}function q(e,n={}){V(e,void 0,n)}function C(e={}){h.router.reload({...o,...e,data:{[r.value.config.sorts]:null}})}function v(e={}){$(void 0,e)}function z(e={}){h.router.reload({...o,...e,data:{[r.value.config.searches]:void 0,[r.value.config.sorts]:void 0,...Object.fromEntries(r.value.filters.map(n=>[n.name,void 0])),...r.value.config.matches?{[r.value.config.matches]:void 0}:{}}})}function D(e,n={}){const t=typeof e=="string"?p(e):e;if(!t){console.warn(`Filter [${e}] does not exist.`);return}const i=t.value,{debounce:g=250,transform:b=k=>k,...T}=n;return{"onUpdate:modelValue":j(k=>{V(t,b(k),T)},g),modelValue:i,value:i}}function G(e,n={}){const t=typeof e=="string"?l(e):e;if(!t){console.warn(`Sort [${e}] does not exist.`);return}const{debounce:i=0,transform:g,...b}=n;return{onClick:j(()=>{var T;W(t,(T=x())==null?void 0:T.direction,b)},i)}}function B(e={}){const{debounce:n=700,transform:t,...i}=e;return{"onUpdate:modelValue":j(g=>{$(g,i)},n),modelValue:r.value.config.search??""}}return{filters:m,sorts:a,getSort:l,getFilter:p,getSearch:w,currentSort:x,currentFilters:A,currentSearches:P,isSorting:_,isFiltering:E,isSearching:M,applyFilter:V,applySort:W,applySearch:$,clearFilter:q,clearSort:C,clearSearch:v,reset:z,bindFilter:D,bindSort:G,bindSearch:B,stringValue:F,omitValue:u,toggleValue:S,delimitArray:y}}s.useRefine=U,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
